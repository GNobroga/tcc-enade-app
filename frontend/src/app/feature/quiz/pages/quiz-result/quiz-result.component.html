<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-item lines="none" slot="start" class="w-full">
      <ion-back-button></ion-back-button>
      <ion-title class="font-semibold">Resultado</ion-title>
      <ion-text slot="end" class="text-lg">{{ timerFormatted  }}</ion-text>
    </ion-item>
  </ion-toolbar>
  <div class="px-5 bg-transparent">
    <ion-progress-bar value="1"  slot="start"></ion-progress-bar>
  </div>
  <div class="px-5 pt-4">
    <swiper-container [slidesPerView]="9" [spaceBetween]="2" [speed]="300">
      @for(question of questions(); track question.id) {
        <swiper-slide>
          <div class="w-8 h-8 flex items-center justify-center border border-black rounded-md font-bold {{ isCorrectQuestion(question.id) ? 'correct' : 'wrong' }} text-white">
            {{ question.id }}
          </div>
        </swiper-slide>
      }
    </swiper-container>
  </div>
</ion-header>
<ion-content class="ion-padding">
  <div class="bg-white py-7 px-4 rounded-lg shadow-xl mt-4">
    <div class="flex items-center px-2 mb-5">
      <span class="font-medium text-lg">Você <br/> acertou: </span>
      <span class="block ms-10">{{ correctQuestionsId().length }} de {{ questions().length }} <br/> questões</span>
    </div>
    <div class="px-3 mt-3">
      <ion-progress-bar [value]="percentageHits" class="result-progress"></ion-progress-bar>
      <div class="flex justify-between text-lg font-medium">
        <span>{{ correctQuestionsId().length }}</span>
        <span>{{ questions().length }}</span>
      </div>
    </div>
    <div class="flex flex-col justify-center items-center mt-3">
      <div class="flex justify-center mb-5">
        <img #img src="assets/image/favourite.gif" class="w-10 h-10"/>
        <img #img src="assets/image/favourite.gif" class="w-10 h-10"/>
        <img #img src="assets/image/favourite.gif" class="w-10 h-10"/>
        <img #img src="assets/image/favourite.gif" class="w-10 h-10"/>
        <img #img src="assets/image/favourite.gif" class="w-10 h-10"/>
      </div>
      <ion-text class="text-xl font-medium">Gostou do app?</ion-text>
      <div class="mt-3">
        <p class="text-sm text-center">Deixe sua avaliação no meu <br/> E-mail.</p>
      </div>
      <ion-button color="dark">Avaliar</ion-button>
    </div>
    <ion-button expand="block" class="mt-5 !h-12" (click)="reviewQuestions()">
      <span class="normal-case text-white text-lg">Ver Gabarito</span>
    </ion-button>
  </div>
  <ion-button expand="block" class="mt-5 !h-12" (click)="restart()">
    <span class="normal-case text-white text-lg">Reiniciar Simulado</span>
  </ion-button>
  <ion-fab horizontal="end" vertical="center" color="tertiary" (click)="goToStudyPage()">
    <ion-fab-button>
      <ion-icon color="light" name="book"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>
